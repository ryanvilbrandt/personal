import re, time, random

clients = """Clients
 ID     | MAC               | IP              | Version        | Last TS             | Telnet
--------+-------------------+-----------------+----------------+---------------------+--------
      2 |              None |            None |           None | 2011-04-21 17:01:53 |
      6 |              None |            None |           None | 2011-04-21 17:01:18 |
   3376 |              None |            None |           None | 2011-04-21 17:03:22 |
     16 |              None |            None |           None | 2011-04-21 17:00:50 |
     20 |              None |            None |           None | 2011-04-21 17:03:25 |
     43 |              None |            None |           None | 2011-04-21 16:59:03 |
     44 |              None |            None |           None | 2011-04-21 16:59:01 |
   3377 |              None |            None |           None | 2011-04-21 17:03:18 |
     51 |              None |            None |           None | 2011-04-21 16:58:59 |
     60 | 64:fc:8c:00:00:9a |   10.181.15.169 | 1536.0.47901.30 | 2011-04-21 17:02:51 |
     67 | 64:fc:8c:00:00:89 |   10.181.15.170 | 1536.0.43549.30 | 2011-04-21 17:03:05 |
     70 | 64:fc:8c:00:00:9b |   10.181.15.167 | 1536.0.43549.30 | 2011-04-21 16:58:34 |
   3378 |              None |            None |           None | 2011-04-21 17:03:19 |
   3379 |              None |            None |           None | 2011-04-21 17:03:19 |
   1699 |              None |            None |           None | 2011-04-21 17:01:00 |
   1700 |              None |            None |           None | 2011-04-21 17:00:56 |
   1701 |              None |            None |           None | 2011-04-21 17:02:08 |
   1319 | 64:fc:8c:00:00:92 |   10.181.15.168 | 1536.0.43549.30 | 2011-04-21 17:02:43 |
   4051 |              None |            None |           None | 2011-04-21 17:03:25 | Yes
   1797 | 64:fc:8c:00:00:90 |   10.181.15.173 |   1536.0.29.30 | 2011-04-21 17:01:12 |
   1801 | 64:fc:8c:00:00:84 |   10.181.15.172 | 1536.0.43549.30 | 2011-04-21 17:00:34 |
   1315 | 64:fc:8c:00:00:7f |   10.181.15.171 | 1536.0.43549.30 | 2011-04-21 17:00:35 |
   4061 | 64:fc:8c:00:00:07 |  10.161.147.172 |      0.6.601.0 | 2011-04-21 16:50:27 |
   3381 |              None |            None |           None | 2011-04-21 17:03:19 |
   3382 |              None |            None |           None | 2011-04-21 17:03:18 |
   3383 |              None |            None |           None | 2011-04-21 17:03:24 |
   3384 |              None |            None |           None | 2011-04-21 17:03:19 |
   3380 |              None |            None |           None | 2011-04-21 17:03:20 |
   3385 |              None |            None |           None | 2011-04-21 17:03:18 |
   4071 | 64:fc:8c:00:00:05 |  10.161.144.169 |      0.6.601.0 | 2011-04-21 17:02:16 |
   4072 | 64:fc:8c:00:00:04 |  10.161.144.170 |      0.6.601.0 | 2011-04-21 16:58:43 |
   3966 | 64:fc:8c:00:00:37 |  10.181.146.169 |      0.6.618.0 | 2011-04-21 17:00:13 |
   3967 | 64:fc:8c:00:00:38 |  10.181.146.170 |      0.6.618.0 | 2011-04-21 16:59:09 |
   3968 | 64:fc:8c:00:00:39 |  10.181.146.171 |      0.6.618.0 | 2011-04-21 16:48:09 |
   3996 | 64:fc:8c:00:00:7c |  10.181.219.167 |      0.6.618.0 | 2011-04-21 17:03:00 |
   3997 | 64:fc:8c:00:00:a1 |  10.181.219.168 |      0.6.618.0 | 2011-04-21 17:01:54 |
   4015 | 64:fc:8c:00:00:35 |  10.181.146.167 |      0.6.601.0 | 2011-04-21 17:00:52 |
   4017 | 64:fc:8c:00:00:36 |  10.181.146.168 |      0.6.601.0 | 2011-04-21 17:01:42 |
   4020 | 64:fc:8c:00:00:57 |  10.181.152.171 |      0.6.601.0 | 2011-04-21 16:56:45 |
   4023 | 64:fc:8c:00:00:20 |  10.161.146.172 |      0.6.601.0 | 2011-04-21 17:03:12 |
   4026 | 64:fc:8c:00:00:19 |  10.161.146.170 |      0.6.601.0 | 2011-04-21 17:03:21 |
   4027 | 64:fc:8c:00:00:1a |  10.161.146.169 |      0.6.601.0 | 2011-04-21 17:02:56 |
   4028 | 64:fc:8c:00:00:27 |  10.161.146.173 |      0.6.601.0 | 2011-04-21 17:02:40 |
   4049 | 64:fc:8c:00:00:24 |  10.161.146.168 |      0.6.601.0 | 2011-04-21 17:03:06 |
   4050 | 64:fc:8c:00:00:26 |  10.161.146.174 |      0.6.601.0 | 2011-04-21 17:03:21 |
   4053 | 64:fc:8c:10:00:17 |  10.181.152.173 |      0.6.521.0 | 2011-04-21 16:52:25 |
   4059 | 64:fc:8c:00:00:0c |  10.161.147.167 |      0.6.601.0 | 2011-04-21 16:54:16 |
   4060 | 64:fc:8c:00:00:0a |  10.161.147.169 |      0.6.601.0 | 2011-04-21 16:41:23 |
   4062 | 64:fc:8c:00:00:03 |  10.161.147.173 |      0.6.601.0 | 2011-04-21 17:03:02 |
   4063 | 64:fc:8c:00:00:02 |  10.161.147.174 |      0.6.601.0 | 2011-04-21 16:57:53 |
   4064 | 64:fc:8c:00:00:00 |   10.181.95.169 |      0.6.601.0 | 2011-04-21 16:58:02 |
   4065 | 64:fc:8c:00:00:17 |   10.181.95.171 |      0.6.601.0 | 2011-04-21 16:49:44 |
   4068 | 64:fc:8c:00:00:01 |   10.181.95.170 |      0.6.601.0 | 2011-04-21 17:03:10 |
   4069 | 64:fc:8c:00:00:2b |   10.181.95.173 |      0.6.601.0 | 2011-04-21 16:53:04 |
   4070 | 64:fc:8c:00:00:18 |   10.181.95.172 |      0.6.601.0 | 2011-04-21 16:31:13 |
   3921 | 64:fc:8c:00:00:1d |  10.181.152.172 |      0.6.521.0 | 2011-04-21 16:17:10 |
   4075 | 64:fc:8c:10:00:1a |  10.161.144.173 |      0.6.601.0 | 2011-04-21 15:53:16 |
   4077 | 64:fc:8c:10:00:19 |  10.161.144.167 |      0.6.601.0 | 2011-04-21 16:35:04 |
   4078 | 64:fc:8c:10:00:03 |  10.161.144.171 |      0.6.601.0 | 2011-04-21 16:55:35 |
   4079 | 64:fc:8c:10:00:18 |  10.181.152.174 |      0.6.601.0 | 2011-04-21 17:02:34 |
   4083 | 64:fc:8c:10:00:12 |  10.181.152.170 |      0.6.521.0 | 2011-04-21 16:23:30 |
   4084 | 64:fc:8c:10:00:17 |  10.161.144.168 |      0.6.601.0 | 2011-04-21 16:54:29 |
   4085 | 64:fc:8c:00:00:7a |  10.181.219.171 |      0.6.582.0 | 2011-04-21 15:15:11 |
   4086 | 64:fc:8c:00:00:7b |  10.181.219.172 |      0.6.582.0 | 2011-04-21 15:17:32 |
   4087 | 64:fc:8c:00:00:a5 |  10.181.219.173 |      0.6.582.0 | 2011-04-21 15:24:24 |
   4088 | 64:fc:8c:00:00:7d |  10.181.219.169 |      0.6.582.0 | 2011-04-21 15:34:27 |
   4089 | 64:fc:8c:00:00:1d |  10.161.144.174 |      0.6.601.0 | 2011-04-21 15:45:58 |
   4090 | 64:fc:8c:00:00:a3 |  10.181.219.170 |      0.6.582.0 | 2011-04-21 16:08:11 |
   4091 | 64:fc:8c:00:00:0f |   10.181.95.167 |      0.6.601.0 | 2011-04-21 16:10:32 |
   4092 | 64:fc:8c:00:00:94 |  10.181.219.174 |      0.6.582.0 | 2011-04-21 16:26:11 |
   4093 | 64:fc:8c:00:00:10 |   10.181.95.168 |      0.6.601.0 | 2011-04-21 16:40:31 |
   4094 | 64:fc:8c:10:00:a2 |  10.161.144.172 |      0.6.601.0 | 2011-04-21 16:45:57 |"""

## 145 10.181.146. Springdale
## 151 10.181.152. Tumwater
## 219 10.181.219. Knoxville 
## 232             Ontario 
## 294 10.181.95.  MSC 
## 341 10.181.15.  N. Las Vegas 
## 350             Mountain Home 
## 638             Caldwell 
## 640             Jerome Twin Falls 
## 713             Latta 
## 744 10.161.144. Ogden 
## 746 10.161.146. Salt Lake City 
## 747 10.161.147. Springville 
## 772 10.161.172. North Salt Lake 
## 773             Nephi 
## 774             Snowville 
## 775             St. George 
## 777             Boise

ip = [r"10.181.146.(\d+)", r"10.181.152.(\d+)", r"10.181.219.(\d+)",
      r"10.181.95.(\d+)", r"10.181.15.(\d+)", r"10.161.144.(\d+)",
      r"10.161.146.(\d+)", r"10.161.147.(\d+)", r"10.161.172.(\d+)", "None"]
fw = r"0.6.621.0"

while True:
    for l in clients.split('\n'):
        print l
    print ""
    print ""
    time.sleep(5)
    temp = [line for line in clients.split('\n')
            if re.search(random.choice(ip),line)]
    for line in temp:
        time.sleep(0.1)
        print line
    time.sleep(2)
    print ""
    temp = [line for line in temp
            if not re.search(fw,line)]
    fw_list = fw.split('.')
    for line in temp:
        n = line.split('|')[0].strip()
        time.sleep(0.2)
        print "installfw {0} {1} Z{2}{3}r{4}.bin".format(n,fw,fw_list[0],
                                                         fw_list[1],fw_list[2])
    print ""
    time.sleep(10)




